<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<th:block th:replace="fragments/header :: headerFragment"></th:block>

<script>
	// input받는 값의 앞 공백 제거
	function trimSpace(input) {
	  return input.replace(/^\s+/, '');
	}
	// input받는 값의 유효성 검사(<,> 입력방지, 글자수 70자)
	function InputCheck(input) {
	  var inputValue = input; // 입력 받는 변수 혹은 데이터베이스에서 가져온 값 등
	  var pattern = /^(?!(&nbsp;|\s)*$).{1,70}$/;
	  
	  if(inputValue.trim().length === 0){
		alert("제목의 내용을 입력하세요");
	  	return false;
	  }else{
	    if (pattern.test(inputValue) && !inputValue.includes("&lt") && !inputValue.includes("&gt") 
	    	  && !inputValue.includes("&#60") && !inputValue.includes("&#62")
			  && !inputValue.includes("<") && !inputValue.includes(">")) {
	      return inputValue;
	    } else {
	      alert("제목에는 <,>는 사용할 수 없습니다.");
	      return false; // 오류 발생 시 false를 반환하여 처리
	    }
	  }
	}
	// form안에 들어오는 id 값들의 유효성 검사 
	function validateForm() {
		var title = document.forms["myForm"]["title"].value;
		var content = document.forms["myForm"]["content"].value;
		
		title = trimSpace(title);
		
		if (InputCheck(title) == false) {
			return false;
		}			
	}
</script>

<body>
	<th:block layout:fragment="content">
		<div class="container">
			<div class="row mb-5 align-items-center">
				<div class="table-container deco center inner-bordered">		
					<div style="width: 100%; height: 150px;"></div>
					
					<div class="col-lg-6">
						<h2 class="font-weight-bold text-primary heading">
							게시글 작성
						</h2>
					</div>
					
				    <form th:action="@{noticeBoard_create}" method="post" th:object="${noticeForm}" >
						
						<input type="hidden" name="updating" value="none">						
						<div class="alert alert-danger" role="alert" th:if="${#fields.hasAnyErrors()}">
				            <div th:each="err : ${#fields.allErrors()}" th:text="${err}" />
				        </div>
				        <div class="mb-3"><br>
				            <label for="title" class="form-label">제목</label>
				            <input type="text" th:field="*{title}" name="title" id="title" maxlength='70' placeholder='제목을 입력하세요' class="form-control">
				        </div>
				        <div class="mb-3">
				            <label for="content" class="form-label">내용</label>
				            <textarea th:field="*{content}" name="content" id="content" style="overflow-x: auto; overflow-y: scroll; resize: none;"maxlength="6000000" class="form-control" rows="10"></textarea>
				        </div>
				        <button type="button" class="btn btn-primary" onclick="window.location.href='/noticeBoard_list'">취소</button>
				        <input type="submit" value="저장하기" class="btn btn-primary my-2">
				    </form>
					
					
				</div>
			</div>
		</div>
		
	</th:block>
</body>


<th:block th:replace="fragments/footer :: footerFragment"></th:block>
</html>